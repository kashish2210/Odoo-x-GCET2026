{% load static %}
<header class="header">
    <div class="container">
        <div class="header-content">
            <div class="logo">
                <img src="{% static 'images/logo.png' %}" alt="Logo" class="logo-img">
                <span class="logo-text">Your Company</span>
            </div>
            
            {% if user.is_authenticated %}
                <!-- Dashboard Navigation (only for authenticated users) -->
                <nav class="dashboard-nav">
                    <a href="{% url 'dashboard' %}" class="nav-item {% if request.resolver_match.url_name == 'dashboard' %}active{% endif %}">
                        Employees
                    </a>
                    <a href="#" class="nav-item disabled">
                        Attendance
                    </a>
                    <a href="#" class="nav-item disabled">
                        Time Off
                    </a>
                </nav>
            {% endif %}
            
            <nav class="nav">
                {% if user.is_authenticated %}
                    <!-- Profile Avatar Dropdown -->
                    <div class="profile-dropdown">
                        <button class="profile-avatar-btn" id="profileDropdownBtn">
                            <div class="avatar-small">
                                {% if user.profile_picture %}
                                    <img src="{{ user.profile_picture.url }}" alt="Profile">
                                {% else %}
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                        <circle cx="12" cy="7" r="4"></circle>
                                    </svg>
                                {% endif %}
                            </div>
                        </button>
                        <div class="dropdown-menu" id="profileDropdownMenu">
                            <div class="dropdown-header">
                                <span class="dropdown-user-name">
                                    {% if user.first_name %}
                                        {{ user.first_name }} {{ user.last_name }}
                                    {% elif user.login_id %}
                                        {{ user.login_id }}
                                    {% else %}
                                        {{ user.email }}
                                    {% endif %}
                                </span>
                                <span class="dropdown-user-email">{{ user.email }}</span>
                            </div>
                            <a href="{% url 'profile' %}" class="dropdown-item">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                    <circle cx="12" cy="7" r="4"></circle>
                                </svg>
                                My Profile
                            </a>
                            <a href="{% url 'account_logout' %}" class="dropdown-item">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                                    <polyline points="16 17 21 12 16 7"></polyline>
                                    <line x1="21" y1="12" x2="9" y2="12"></line>
                                </svg>
                                Log Out
                            </a>
                        </div>
                    </div>
                {% else %}
                    <a href="{% url 'account_login' %}" class="nav-link">Sign In</a>
                    <a href="{% url 'account_signup' %}" class="nav-link">Sign Up</a>
                {% endif %}
                
                <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
                    <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                    <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                </button>
            </nav>
        </div>
    </div>
</header>

<script>
// Profile Dropdown Toggle
document.addEventListener('DOMContentLoaded', function() {
    const profileDropdownBtn = document.getElementById('profileDropdownBtn');
    const profileDropdownMenu = document.getElementById('profileDropdownMenu');
    
    if (profileDropdownBtn && profileDropdownMenu) {
        profileDropdownBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            profileDropdownMenu.classList.toggle('show');
        });
        
        // Close dropdown when clicking outside
        document.addEventListener('click', function(e) {
            if (!profileDropdownBtn.contains(e.target) && !profileDropdownMenu.contains(e.target)) {
                profileDropdownMenu.classList.remove('show');
            }
        });
    }
});
</script>