{% load static %}
<header class="dashboard-header">
    <div class="dashboard-header-content">
        <!-- Company Logo -->
        <div class="logo" id="dashboardLogo">
            {% if user.company_logo %}
                <img src="{{ user.company_logo.url }}" alt="Company Logo" class="logo-img">
            {% else %}
                <!-- Default Company Building SVG -->
                <svg class="logo-svg" xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="4" y="2" width="16" height="20" rx="2" ry="2"></rect>
                    <path d="M9 22v-4h6v4"></path>
                    <path d="M8 6h.01"></path>
                    <path d="M16 6h.01"></path>
                    <path d="M12 6h.01"></path>
                    <path d="M12 10h.01"></path>
                    <path d="M12 14h.01"></path>
                    <path d="M16 10h.01"></path>
                    <path d="M16 14h.01"></path>
                    <path d="M8 10h.01"></path>
                    <path d="M8 14h.01"></path>
                </svg>
            {% endif %}
        </div>
        
        <!-- Navigation -->
        <nav class="dashboard-nav">
            <a href="{% url 'employee:employees' %}" class="nav-item employees">Employees</a>
            <a href="{% url 'attendance:attendance' %}" class="nav-item attendance">Attendance</a>
            <a href="#" class="nav-item time_off">Time Off</a>
        </nav>
        
        <!-- Header Actions -->
        <div class="header-actions">
            {% if user.is_authenticated %}
                <!-- Check-in LED & Button -->
                <div class="check-in-section">
                    <div class="led-indicator {% if user.is_checked_in or user.done_for_day %}led-green{% else %}led-red{% endif %}"></div>
                    <form method="post" action="{% url 'attendance:toggle' %}">
                        {% csrf_token %}
                        <button class="btn-check-in" id="checkInBtn" {% if user.done_for_day %} disabled {% endif %}>
                            {% if user.is_checked_in and not user.done_for_day %}
                                Check Out
                            {% elif user.done_for_day %}
                                Done for day
                            {% else %}
                                Check In
                            {% endif %}
                        </button>
                    </form>
                </div>

                <!-- Profile Dropdown -->
                <div class="profile-dropdown">
                    <button class="profile-btn" id="profileBtn">
                        {% if user.profile_avatar %}
                            <img src="{{ user.profile_avatar.url }}" alt="Profile" class="profile-avatar">
                        {% else %}
                            <div class="profile-avatar-placeholder">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                    <circle cx="12" cy="7" r="4"></circle>
                                </svg>
                            </div>
                        {% endif %}
                    </button>
                    
                    <div class="dropdown-menu" id="dropdownMenu">
                        <a href="{% url 'employee:profile' %}" class="dropdown-item">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                <circle cx="12" cy="7" r="4"></circle>
                            </svg>
                            My Profile
                        </a>
                        <a href="{% url 'account_logout' %}" class="dropdown-item">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                                <polyline points="16 17 21 12 16 7"></polyline>
                                <line x1="21" y1="12" x2="9" y2="12"></line>
                            </svg>
                            Log Out
                        </a>
                    </div>
                </div>
            {% else %}
                <a href="{% url 'account_login' %}" class="nav-link">Sign In</a>
                <a href="{% url 'account_signup' %}" class="nav-link">Sign Up</a>
            {% endif %}

            <!-- Theme Toggle -->
            <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
                <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="5"></circle>
                    <line x1="12" y1="1" x2="12" y2="3"></line>
                    <line x1="12" y1="21" x2="12" y2="23"></line>
                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                    <line x1="1" y1="12" x2="3" y2="12"></line>
                    <line x1="21" y1="12" x2="23" y2="12"></line>
                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                </svg>
                <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                </svg>
            </button>
        </div>
    </div>
</header>

<script>
// Profile dropdown toggle
document.addEventListener('DOMContentLoaded', function() {
    const profileBtn = document.getElementById('profileBtn');
    const dropdownMenu = document.getElementById('dropdownMenu');
    
    if (profileBtn && dropdownMenu) {
        profileBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            dropdownMenu.classList.toggle('show');
        });
        
        // Close dropdown when clicking outside
        document.addEventListener('click', function() {
            dropdownMenu.classList.remove('show');
        });
    }
    
});
</script>