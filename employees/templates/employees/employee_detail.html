{% extends 'base.html' %}
{% load static %}

{% block title %}{{ employee.login_id }} - Employee Details{% endblock %}

{% block extra_css %}
<style>
    .employee-detail-page {
        padding: 24px;
        max-width: 1200px;
        margin: 0 auto;
    }
    
    .page-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 32px;
    }
    
    .header-left {
        display: flex;
        align-items: center;
        gap: 16px;
    }
    
    .back-btn {
        width: 40px;
        height: 40px;
        border-radius: 8px;
        background: var(--card-bg);
        border: 1px solid var(--border-color);
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.2s ease;
        text-decoration: none;
        color: var(--text-primary);
    }
    
    .back-btn:hover {
        background: var(--hover-bg);
        transform: translateX(-2px);
    }
    
    .page-header h1 {
        font-size: 28px;
        font-weight: 700;
        color: var(--text-primary);
        margin: 0;
    }
    
    .header-actions {
        display: flex;
        gap: 12px;
    }
    
    .btn {
        padding: 10px 20px;
        border-radius: 8px;
        font-weight: 600;
        font-size: 14px;
        cursor: pointer;
        transition: all 0.2s ease;
        border: none;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 8px;
    }
    
    .btn-primary {
        background: var(--primary-color);
        color: white;
    }
    
    .btn-primary:hover {
        opacity: 0.9;
    }
    
    .btn-danger {
        background: #dc3545;
        color: white;
    }
    
    .btn-danger:hover {
        background: #c82333;
    }
    
    .profile-header-card {
        background: var(--card-bg);
        border-radius: 12px;
        padding: 32px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        margin-bottom: 24px;
    }
    
    .profile-header-content {
        display: flex;
        align-items: center;
        gap: 32px;
    }
    
    .profile-avatar-large {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        object-fit: cover;
        border: 4px solid var(--border-color);
    }
    
    .profile-avatar-placeholder-large {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        background: var(--primary-color);
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
        font-size: 48px;
        border: 4px solid var(--border-color);
    }
    
    .profile-info {
        flex: 1;
    }
    
    .profile-name {
        font-size: 32px;
        font-weight: 700;
        color: var(--text-primary);
        margin-bottom: 8px;
    }
    
    .profile-meta {
        display: flex;
        align-items: center;
        gap: 16px;
        margin-bottom: 16px;
    }
    
    .status-badge {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 6px 16px;
        border-radius: 16px;
        font-size: 13px;
        font-weight: 600;
    }
    
    .status-active {
        background: #d4edda;
        color: #155724;
    }
    
    .status-inactive {
        background: #f8d7da;
        color: #721c24;
    }
    
    .profile-role {
        color: var(--text-secondary);
        font-size: 16px;
    }
    
    .profile-stats {
        display: flex;
        gap: 32px;
        margin-top: 24px;
        padding-top: 24px;
        border-top: 1px solid var(--border-color);
    }
    
    .stat-item {
        display: flex;
        flex-direction: column;
    }
    
    .stat-label {
        color: var(--text-secondary);
        font-size: 13px;
        margin-bottom: 4px;
    }
    
    .stat-value {
        color: var(--text-primary);
        font-size: 18px;
        font-weight: 600;
    }
    
    .details-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 24px;
    }
    
    .detail-card {
        background: var(--card-bg);
        border-radius: 12px;
        padding: 24px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }
    
    .detail-card-header {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 20px;
        padding-bottom: 16px;
        border-bottom: 2px solid var(--border-color);
    }
    
    .detail-card-icon {
        width: 40px;
        height: 40px;
        border-radius: 8px;
        background: var(--primary-color);
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    .detail-card-title {
        font-size: 18px;
        font-weight: 700;
        color: var(--text-primary);
        margin: 0;
    }
    
    .detail-row {
        display: flex;
        justify-content: space-between;
        padding: 12px 0;
        border-bottom: 1px solid var(--border-color);
    }
    
    .detail-row:last-child {
        border-bottom: none;
    }
    
    .detail-label {
        color: var(--text-secondary);
        font-size: 14px;
        font-weight: 500;
    }
    
    .detail-value {
        color: var(--text-primary);
        font-size: 14px;
        font-weight: 600;
        text-align: right;
    }
    
    .empty-data {
        color: var(--text-secondary);
        font-style: italic;
        text-align: center;
        padding: 20px;
    }
</style>
{% endblock %}

{% block content %}
<div class="employee-detail-page">
    <div class="page-header">
        <div class="header-left">
            <a href="{% url 'employee:employees' %}" class="back-btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="19" y1="12" x2="5" y2="12"></line>
                    <polyline points="12 19 5 12 12 5"></polyline>
                </svg>
            </a>
            <h1>Employee Details</h1>
        </div>
        <div class="header-actions">
            <button class="btn btn-primary">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                </svg>
                Edit
            </button>
            <button class="btn btn-danger">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="3 6 5 6 21 6"></polyline>
                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                </svg>
                Delete
            </button>
        </div>
    </div>
    
    <!-- Profile Header -->
    <div class="profile-header-card">
        <div class="profile-header-content">
            {% if employee.profile_avatar %}
                <img src="{{ employee.profile_avatar.url }}" alt="{{ employee.login_id }}" class="profile-avatar-large">
            {% else %}
                <div class="profile-avatar-placeholder-large">
                    {{ employee.login_id|slice:":2"|upper }}
                </div>
            {% endif %}
            
            <div class="profile-info">
                <h2 class="profile-name">{{ employee.login_id }}</h2>
                <div class="profile-meta">
                    <span class="status-badge {% if employee.is_active %}status-active{% else %}status-inactive{% endif %}">
                        <svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 24 24" fill="currentColor">
                            <circle cx="12" cy="12" r="12"></circle>
                        </svg>
                        {% if employee.is_active %}Active{% else %}Inactive{% endif %}
                    </span>
                    <span class="profile-role">{{ employee.get_role_display }}</span>
                </div>
                
                <div class="profile-stats">
                    <div class="stat-item">
                        <span class="stat-label">Employee ID</span>
                        <span class="stat-value">{{ employee.login_id }}</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Email</span>
                        <span class="stat-value">{{ employee.email }}</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Joined Date</span>
                        <span class="stat-value">{{ employee.date_joined|date:"M d, Y" }}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Details Grid -->
    <div class="details-grid">
        <!-- Professional Information -->
        <div class="detail-card">
            <div class="detail-card-header">
                <div class="detail-card-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
                        <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
                    </svg>
                </div>
                <h3 class="detail-card-title">Professional Information</h3>
            </div>
            
            {% if profile %}
                <div class="detail-row">
                    <span class="detail-label">Job Position</span>
                    <span class="detail-value">{{ profile.job_position|default:"Not specified" }}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Department</span>
                    <span class="detail-value">{{ profile.department|default:"Not specified" }}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Company</span>
                    <span class="detail-value">{{ profile.company|default:"Not specified" }}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Location</span>
                    <span class="detail-value">{{ profile.location|default:"Not specified" }}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Manager</span>
                    <span class="detail-value">{{ profile.manager.login_id|default:"Not assigned" }}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Phone</span>
                    <span class="detail-value">{{ profile.phone|default:"Not specified" }}</span>
                </div>
            {% else %}
                <div class="empty-data">No profile information available</div>
            {% endif %}
        </div>
        
        <!-- Personal Information -->
        <div class="detail-card">
            <div class="detail-card-header">
                <div class="detail-card-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                </div>
                <h3 class="detail-card-title">Personal Information</h3>
            </div>
            
            {% if private_info %}
                <div class="detail-row">
                    <span class="detail-label">Date of Birth</span>
                    <span class="detail-value">{{ private_info.date_of_birth|date:"M d, Y"|default:"Not specified" }}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Gender</span>
                    <span class="detail-value">{{ private_info.get_gender_display|default:"Not specified" }}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Marital Status</span>
                    <span class="detail-value">{{ private_info.get_marital_status_display|default:"Not specified" }}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Nationality</span>
                    <span class="detail-value">{{ private_info.nationality|default:"Not specified" }}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Personal Email</span>
                    <span class="detail-value">{{ private_info.personal_email|default:"Not specified" }}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Address</span>
                    <span class="detail-value">{{ private_info.residing_address|default:"Not specified" }}</span>
                </div>
            {% else %}
                <div class="empty-data">No personal information available</div>
            {% endif %}
        </div>
        
        <!-- Bank Details -->
        <div class="detail-card">
            <div class="detail-card-header">
                <div class="detail-card-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
                        <line x1="1" y1="10" x2="23" y2="10"></line>
                    </svg>
                </div>
                <h3 class="detail-card-title">Bank & Tax Details</h3>
            </div>
            
            {% if private_info %}
                <div class="detail-row">
                    <span class="detail-label">Bank Name</span>
                    <span class="detail-value">{{ private_info.bank_name|default:"Not specified" }}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Account Number</span>
                    <span class="detail-value">{{ private_info.account_number|default:"Not specified" }}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">IFSC Code</span>
                    <span class="detail-value">{{ private_info.ifsc_code|default:"Not specified" }}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">PAN Number</span>
                    <span class="detail-value">{{ private_info.pan_no|default:"Not specified" }}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">UAN Number</span>
                    <span class="detail-value">{{ private_info.uan_no|default:"Not specified" }}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Employee Code</span>
                    <span class="detail-value">{{ private_info.emp_code|default:"Not specified" }}</span>
                </div>
            {% else %}
                <div class="empty-data">No bank details available</div>
            {% endif %}
        </div>
        
        <!-- Salary Information -->
        <div class="detail-card">
            <div class="detail-card-header">
                <div class="detail-card-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="1" x2="12" y2="23"></line>
                        <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                    </svg>
                </div>
                <h3 class="detail-card-title">Salary Information</h3>
            </div>
            
            {% if salary_info %}
                <div class="detail-row">
                    <span class="detail-label">Monthly Wage</span>
                    <span class="detail-value">₹{{ salary_info.monthly_wage|default:"0.00" }}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Yearly Wage</span>
                    <span class="detail-value">₹{{ salary_info.yearly_wage|default:"0.00" }}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Working Days/Week</span>
                    <span class="detail-value">{{ salary_info.working_days_per_week }} days</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Break Time</span>
                    <span class="detail-value">{{ salary_info.break_time_hours|default:"0.00" }} hours</span>
                </div>
            {% else %}
                <div class="empty-data">No salary information available</div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// Edit button handler
document.querySelector('.btn-primary').addEventListener('click', function() {
    alert('Edit functionality coming soon!');
});

// Delete button handler
document.querySelector('.btn-danger').addEventListener('click', function() {
    if (confirm('Are you sure you want to delete this employee? This action cannot be undone.')) {
        alert('Delete functionality coming soon!');
    }
});
</script>
{% endblock %}